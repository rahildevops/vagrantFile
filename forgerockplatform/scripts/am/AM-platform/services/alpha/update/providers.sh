#### updating Oauth provider in aplah realm 
sudo echo "starting updating Oauth provider in aplah realm"
 # Make the HTTP PUT request to update OAuth2 provider in alpha realm
    curl -X PUT "http://am.example.com:8081/am/json/realms/root/realms/alpha/realm-config/services/oauth-oidc" \
      -H "Accept: application/json, text/javascript, */*; q=0.01" \
      -H "Accept-API-Version: protocol=1.0,resource=1.0" \
      -H "Accept-Encoding: gzip, deflate" \
      -H "Accept-Language: en-US" \
      -H "Cache-Control: no-cache" \
      -H "Connection: keep-alive" \
      -H "Content-Type: application/json" \
      -H "Host: am.example.com:8081" \
      -H "iPlanetDirectoryPro: $ADMIN_TOKEN" \
      -H "Origin: http://am.example.com:8081" \
      -H "Referer: http://am.example.com:8081/am/ui-admin/" \
      -H "User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36 Edg/135.0.0.0" \
      -H "X-Requested-With: XMLHttpRequest" \
      -d '{"advancedOIDCConfig":{"supportedRequestParameterEncryptionEnc":["A256GCM","A192GCM","A128GCM","A128CBC-HS256","A192CBC-HS384","A256CBC-HS512"],"authorisedOpenIdConnectSSOClients":[],"supportedUserInfoEncryptionAlgorithms":["ECDH-ES+A256KW","ECDH-ES+A192KW","RSA-OAEP","ECDH-ES+A128KW","RSA-OAEP-256","A128KW","A256KW","ECDH-ES","dir","A192KW"],"supportedAuthorizationResponseEncryptionEnc":["A256GCM","A192GCM","A128GCM","A128CBC-HS256","A192CBC-HS384","A256CBC-HS512"],"supportedTokenIntrospectionResponseEncryptionAlgorithms":["ECDH-ES+A256KW","ECDH-ES+A192KW","RSA-OAEP","ECDH-ES+A128KW","RSA-OAEP-256","A128KW","A256KW","ECDH-ES","dir","A192KW"],"useForceAuthnForPromptLogin":false,"useForceAuthnForMaxAge":false,"alwaysAddClaimsToToken":false,"supportedTokenIntrospectionResponseSigningAlgorithms":["PS384","RS384","EdDSA","ES384","HS256","HS512","ES256","RS256","HS384","ES512","PS256","PS512","RS512"],"supportedTokenEndpointAuthenticationSigningAlgorithms":["PS384","ES384","RS384","HS256","HS512","ES256","RS256","HS384","ES512","PS256","PS512","RS512"],"supportedRequestParameterSigningAlgorithms":["PS384","ES384","RS384","HS256","HS512","ES256","RS256","HS384","ES512","PS256","PS512","RS512"],"includeAllKtyAlgCombinationsInJwksUri":false,"amrMappings":{},"loaMapping":{},"authorisedIdmDelegationClients":[],"idTokenInfoClientAuthenticationEnabled":true,"storeOpsTokens":true,"supportedUserInfoSigningAlgorithms":["ES384","HS256","HS512","ES256","RS256","HS384","ES512"],"supportedAuthorizationResponseSigningAlgorithms":["PS384","RS384","EdDSA","ES384","HS256","HS512","ES256","RS256","HS384","ES512","PS256","PS512","RS512"],"supportedUserInfoEncryptionEnc":["A256GCM","A192GCM","A128GCM","A128CBC-HS256","A192CBC-HS384","A256CBC-HS512"],"claimsParameterSupported":false,"supportedTokenIntrospectionResponseEncryptionEnc":["A256GCM","A192GCM","A128GCM","A128CBC-HS256","A192CBC-HS384","A256CBC-HS512"],"supportedAuthorizationResponseEncryptionAlgorithms":["ECDH-ES+A256KW","ECDH-ES+A192KW","RSA-OAEP","ECDH-ES+A128KW","RSA-OAEP-256","A128KW","A256KW","ECDH-ES","dir","A192KW"],"supportedRequestParameterEncryptionAlgorithms":["ECDH-ES+A256KW","ECDH-ES+A192KW","ECDH-ES+A128KW","RSA-OAEP","RSA-OAEP-256","A128KW","A256KW","ECDH-ES","dir","A192KW"],"defaultACR":[]},"advancedOAuth2Config":{"passwordGrantAuthService":"[Empty]","tokenCompressionEnabled":false,"tokenEncryptionEnabled":false,"requirePushedAuthorizationRequests":false,"tlsCertificateBoundAccessTokensEnabled":true,"includeSubnameInTokenClaims":true,"defaultScopes":[],"moduleMessageEnabledInPasswordGrant":false,"allowClientCredentialsInTokenRequestQueryParameters":false,"supportedSubjectTypes":["public","pairwise"],"refreshTokenGracePeriod":0,"tlsClientCertificateHeaderFormat":"URLENCODED_PEM","hashSalt":"changeme","macaroonTokenFormat":"V2","maxAgeOfRequestObjectNbfClaim":0,"tlsCertificateRevocationCheckingEnabled":false,"nbfClaimRequiredInRequestObject":false,"requestObjectProcessing":"OIDC","maxDifferenceBetweenRequestObjectNbfAndExp":0,"responseTypeClasses":["code|org.forgerock.oauth2.core.AuthorizationCodeResponseTypeHandler","id_token|org.forgerock.openidconnect.IdTokenResponseTypeHandler","token|org.forgerock.oauth2.core.TokenResponseTypeHandler"],"expClaimRequiredInRequestObject":false,"tokenValidatorClasses":["urn:ietf:params:oauth:token-type:id_token|org.forgerock.oauth2.core.tokenexchange.idtoken.OidcIdTokenValidator","urn:ietf:params:oauth:token-type:access_token|org.forgerock.oauth2.core.tokenexchange.accesstoken.OAuth2AccessTokenValidator"],"tokenSigningAlgorithm":"HS256","codeVerifierEnforced":"false","displayNameAttribute":"cn","tokenExchangeClasses":["urn:ietf:params:oauth:token-type:access_token=>urn:ietf:params:oauth:token-type:access_token|org.forgerock.oauth2.core.tokenexchange.accesstoken.AccessTokenToAccessTokenExchanger","urn:ietf:params:oauth:token-type:id_token=>urn:ietf:params:oauth:token-type:id_token|org.forgerock.oauth2.core.tokenexchange.idtoken.IdTokenToIdTokenExchanger","urn:ietf:params:oauth:token-type:access_token=>urn:ietf:params:oauth:token-type:id_token|org.forgerock.oauth2.core.tokenexchange.accesstoken.AccessTokenToIdTokenExchanger","urn:ietf:params:oauth:token-type:id_token=>urn:ietf:params:oauth:token-type:access_token|org.forgerock.oauth2.core.tokenexchange.idtoken.IdTokenToAccessTokenExchanger"],"parRequestUriLifetime":90,"allowedAudienceValues":[],"persistentClaims":[],"supportedScopes":["fr:idm:*","openid"],"authenticationAttributes":["uid"],"grantTypes":["implicit","urn:ietf:params:oauth:grant-type:saml2-bearer","refresh_token","password","client_credentials","urn:ietf:params:oauth:grant-type:device_code","authorization_code","urn:openid:params:grant-type:ciba","urn:ietf:params:oauth:grant-type:uma-ticket","urn:ietf:params:oauth:grant-type:token-exchange","urn:ietf:params:oauth:grant-type:jwt-bearer"]},"clientDynamicRegistrationConfig":{"dynamicClientRegistrationScope":"dynamic_client_registration","allowDynamicRegistration":false,"requiredSoftwareStatementAttestedAttributes":["redirect_uris"],"dynamicClientRegistrationSoftwareStatementRequired":false,"generateRegistrationAccessTokens":true},"coreOIDCConfig":{"overrideableOIDCClaims":[],"oidcDiscoveryEndpointEnabled":false,"supportedIDTokenEncryptionMethods":["A256GCM","A192GCM","A128GCM","A128CBC-HS256","A192CBC-HS384","A256CBC-HS512"],"supportedClaims":[],"supportedIDTokenSigningAlgorithms":["PS384","ES384","RS384","HS256","HS512","ES256","RS256","HS384","ES512","PS256","PS512","RS512"],"supportedIDTokenEncryptionAlgorithms":["ECDH-ES+A256KW","ECDH-ES+A192KW","RSA-OAEP","ECDH-ES+A128KW","RSA-OAEP-256","A128KW","A256KW","ECDH-ES","dir","A192KW"],"jwtTokenLifetime":3600},"coreOAuth2Config":{"refreshTokenLifetime":604800,"scopesPolicySet":"oauth2Scopes","accessTokenMayActScript":"[Empty]","accessTokenLifetime":3600,"macaroonTokensEnabled":false,"codeLifetime":120,"statelessTokensEnabled":false,"usePolicyEngineForScope":false,"issueRefreshToken":true,"oidcMayActScript":"[Empty]","issueRefreshTokenOnRefreshedToken":true},"consent":{"clientsCanSkipConsent":true,"savedConsentAttribute":"","enableRemoteConsent":false,"remoteConsentServiceId":"[Empty]","supportedRcsRequestEncryptionMethods":["A256GCM","A192GCM","A128GCM","A128CBC-HS256","A192CBC-HS384","A256CBC-HS512"],"supportedRcsResponseEncryptionAlgorithms":["ECDH-ES+A256KW","ECDH-ES+A192KW","ECDH-ES+A128KW","RSA-OAEP","RSA-OAEP-256","A128KW","A256KW","ECDH-ES","dir","A192KW"],"supportedRcsResponseEncryptionMethods":["A256GCM","A192GCM","A128GCM","A128CBC-HS256","A192CBC-HS384","A256CBC-HS512"],"supportedRcsRequestEncryptionAlgorithms":["ECDH-ES+A256KW","ECDH-ES+A192KW","RSA-OAEP","ECDH-ES+A128KW","RSA-OAEP-256","A128KW","A256KW","ECDH-ES","dir","A192KW"],"supportedRcsRequestSigningAlgorithms":["PS384","ES384","RS384","HS256","HS512","ES256","RS256","HS384","ES512","PS256","PS512","RS512"],"supportedRcsResponseSigningAlgorithms":["PS384","ES384","RS384","HS256","HS512","ES256","RS256","HS384","ES512","PS256","PS512","RS512"]},"deviceCodeConfig":{"deviceUserCodeLength":8,"deviceCodeLifetime":300,"deviceUserCodeCharacterSet":"234567ACDEFGHJKLMNPQRSTWXYZabcdefhijkmnopqrstwxyz","devicePollInterval":5},"pluginsConfig":{"evaluateScopeClass":"org.forgerock.oauth2.core.plugins.registry.DefaultScopeEvaluator","validateScopeScript":"25e6c06d-cf70-473b-bd28-26931edc476b","accessTokenEnricherClass":"org.forgerock.oauth2.core.plugins.registry.DefaultAccessTokenEnricher","oidcClaimsPluginType":"SCRIPTED","authorizeEndpointDataProviderClass":"org.forgerock.oauth2.core.plugins.registry.DefaultEndpointDataProvider","authorizeEndpointDataProviderPluginType":"JAVA","userCodeGeneratorClass":"org.forgerock.oauth2.core.plugins.registry.DefaultUserCodeGenerator","evaluateScopeScript":"da56fe60-8b38-4c46-a405-d6b306d4b336","evaluateScopePluginType":"JAVA","authorizeEndpointDataProviderScript":"3f93ef6e-e54a-4393-aba1-f322656db28a","accessTokenModificationScript":"d22f9a0c-426a-4466-b95e-d0f125b0d5fa","validateScopePluginType":"JAVA","accessTokenModificationPluginType":"SCRIPTED","oidcClaimsScript":"36863ffb-40ec-48b9-94b1-9a99f71cc3b5","validateScopeClass":"org.forgerock.oauth2.core.plugins.registry.DefaultScopeValidator"},"cibaConfig":{"cibaMinimumPollingInterval":2,"supportedCibaSigningAlgorithms":["ES256","PS256"],"cibaAuthReqIdLifetime":600},"_id":"","_type":{"_id":"oauth-oidc","name":"OAuth2 Provider","collection":false}}' \
      -o /vagrant/curl_response.json \
      -v 2>> /vagrant/curl_error.log

    # Check the curl exit status
    if [ $? -ne 0 ]; then
      echo "curl request failed. Check /vagrant/curl_error.log for details."
      exit 1
    fi

    # Log completion
    echo "OAuth2 provider update request for alpha realm completed at $(date)" >> /vagrant/curl_request.log
